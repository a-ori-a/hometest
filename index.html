<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>エースエディター</title>
</head>
<body>
  <input id='saveBtn'type='button' value='保存'></input>
  <input id='jsBtn'type='button'value='Edit JS'></input>
  <input id='htmlBtn'type='button'value='Edit HTML'></input>
  <div id="editor" style="height: 600px;"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"></script>
  <script>
    var editor = ace.edit("editor");
    var code;
    var saveBtn = document.getElementById('saveBtn');
    var jsBtn = document.getElementById('jsBtn');
    var htmlBtn = document.getElementById('htmlBtn');
    editor.$blockScrolling = Infinity;
    editor.setOptions({
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true
    });
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/javascript");

    saveBtn.addEventListener('click', async () => {
      code = editor.getValue()
      let share = {text:code}
      await navigator.share(share);
      navigator.clipboard.writeText(code);
    });
    jsBtn.addEventListener('click', async () => {
      editor.getSession().setMode("ace/mode/javascript");
    });
    htmlBtn.addEventListener('click', async () => {
      editor.getSession().setMode('ace/mode/html');
    });
    function autoSave() {
      code = editor.getValue()
      document.cookie = 'code=';
      document.cookie = 'code='+code;
      console.log(code)
    }
    setInterval(autoSave,100);
  </script>
</body>
</html>